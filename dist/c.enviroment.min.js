/** @license
 * protocore-js <https://github.com/dzonzbonz/ProtoCoreJS>
 * Author: Nikola Ivanovic - Dzonz Bonz | MIT License
 * v0.0.1 (2015/06/12 14:59)
 */
;(function(){var a=function(a){return a.Enviroment={},a.Enviroment.Thread=function(a){this.run=function(){}},a.factory(a.Enviroment,"Thread",function(){function d(a){try{var b=JSON.stringify(a)}catch(c){throw new Error("Arguments provided to parallel function must be JSON serializable")}var d=typeof b=="undefined"?0:b.length,e=new ArrayBuffer(d),f=new DataView(e);for(var g=0;g<d;g++)f.setUint8(g,b.charCodeAt(g)&255);return e}function e(a){var b=new DataView(a),c=a.byteLength,d=Array(c);for(var e=0;e<c;e++)d[e]=String.fromCharCode(b.getUint8(e));if(!d.length)return;return JSON.parse(d.join(""))}var b=window.Worker,c=window.URL||window.webkitURL,f=function(){var a=decodeFunc,b=encodeFunc,c=func;c.pipe=function(a,b){self.postMessage({message:a,data:b})},c.sleep=function(a){var b=(new Date).getTime();while((new Date).getTime()<b+a);},self.addEventListener("message",function(a){var b=a.data,d=c.apply(c,b);self.postMessage({message:!1,data:d}),self.close()})},g=function(a){a=a;var b=a.name,g=a.toString();if(!b){b="$"+(Math.random()*10|0);while(g.indexOf(b)!==-1)b+=Math.random()*10|0}var h=f.toString().replace(/^.*?[\n\r]+/gi,"").replace(/\}[\s]*$/,"").replace(/\/\*\*\/name\/\*\*\//gi,b).replace(/\/\*\*\/func\/\*\*\//gi,g).replace(/\/\*\*\/decodeFunc\/\*\*\//gi,e.toString()).replace(/\/\*\*\/encodeFunc\/\*\*\//gi,d.toString()),i=c.createObjectURL(new Blob([h],{type:"text/javascript"}));return i},h=function(a,b,c,d){var e=new Worker(a),f=this,g=function(a){var d=a.data;d.message?c.call(f,d):b.call(f,d)};return e.addEventListener("message",g),e.postMessage(d),e},i=function(b,c,e){var f=!1,i={start:0,end:0,time:0},j=null;this.run=function(){if(!f){f=!0;var a=this,d=g(b);j=h(d,c,e,[].slice.call(arguments))}},this.pipe=function(a,b){if(f){var c=d({message:a,data:b});j.postMessage(c,[c])}},this.stop=function(){f&&(j.terminate(),f=!1)},a.mode(this,["run","pipe"],a.MODE_LOCKED)};return i.prototype=new a.Enviroment.Thread,i.prototype.constructor=a.Enviroment.Thread,i}),a.Enviroment.Object=function(){this.guid=function(){},this.data=function(){},this.serialize=function(){},this.unserialize=function(a){},this.toJSON=function(){}},a.factory(a.Enviroment,"Object",function(){var b=function(){var b=a.guid(4),c={};a.extend(this),this.guid=function(){return b},a.mode(this,"guid",a.MODE_LOCKED),this.data=function(b,d){if(a.isDefined(d)){if(!a.isDefined(b))return c;if(!a.isArray(b)&&!a.isObject(b))return a.isDefined(c[b])?c[b]:null;c=b}else null===b?c={}:c[b]=d;return this},this.serialize=function(){return this.toJSON()},this.unserialize=function(d){return d.guid&&(b=d.guid,c=a.unserialize(d.data)),this},this.toString=function(){return{}},this.toJSON=function(){return{guid:b,data:a.serialize(c)}}};return b.prototype=new a.Enviroment.Object,b.prototype.constructor=a.Enviroment.Object,b},a.MODE_LOCKED),a.Enviroment.EventData=function(a){this.stopPropagation=function(){},this.continuePropagation=function(){},this.preventDefault=function(){},this.assumeDefault=function(){},this.stopped=function(){},this.assumed=function(){}},a.Enviroment.EventData.prototype=new a.Enviroment.Object,a.Enviroment.EventData.prototype.constructor=a.Enviroment.EventData,a.factory(a.Enviroment,"EventData",function(){var b=function(b){var c=null,d=!1,e=!0,f=new a.Enviroment.Object;a.extend(this,f),this.stopPropagation=function(){return d=!0,this},this.continuePropagation=function(){return d=!1,this},this.preventDefault=function(){return e=!1,this},this.assumeDefault=function(){return e=!0,this},this.stoped=function(){return d},this.assumed=function(){return e},this.data(b),a.mode(this,["assumed","stoped","assumeDefault","preventDefault","continuePropagation","stopPropagation"],a.MODE_LOCKED)};return b.prototype=new a.Enviroment.EventData,b.prototype.constructor=a.Enviroment.EventData,b},a.MODE_LOCKED),a.Enviroment.Event=function(a,b,c){this.subscribe=function(a){},this.notify=function(a){},this.empty=function(){},this.reset=function(){},this.suspend=function(){},this.resume=function(){}},a.Enviroment.Event.prototype=new a.Enviroment.Object,a.Enviroment.Event.prototype.constructor=a.Enviroment.Event,a.factory(a.Enviroment,"Event",function(){var b=function(b,c,d){var e={before:a.isDefined(c)?c:function(){},after:a.isDefined(b)?b:function(){},subscribers:[]},f=0,g=d,h=new a.Enviroment.Object;a.extend(this,h),this.subscribe=function(b){return e.subscribers.push({delegate:a.isArray(b)?b[1]:b,context:a.isArray(b)?b[0]:g}),this},this.notify=function(b,c){var d=g;c&&(d=c);if(f>0)return this;this.reset(),a.isFunction(e.before)&&e.before.call(d,b);if(!b.stoped()){var h=e.subscribers;for(var i in h){var j=h[i].delegate;j.call(h[i].context||d,b,c);if(b.stoped())break}}return b.assumed()&&a.isFunction(e.after)&&e.after.call(d,b,d),this},this.empty=function(){return e||(e.subscribers=new Array),f=0,this},this.reset=function(){return f=0,this},this.suspend=function(){return f++,this},this.resume=function(){return f--,this},a.mode(this,["assumed","stoped","assumeDefault","preventDefault","continuePropagation","stopPropagation"],a.MODE_LOCKED)};return b.prototype=new a.Enviroment.Event,b.prototype.constructor=a.Enviroment.Event,b}),a=a||{},a.Enviroment=a.Enviroment||{},a.Enviroment.Event=function(b,c,d){var e={before:c||function(){},after:d||function(){},subscribers:new Array},f=0,g=b;this.subscribe=function(a,b){return e.subscribers.push({delegate:a,context:b?b:g}),this},this.notify=function(a,b){var c=g;b&&(c=b);if(f>0)return this;this.reset(),e.before&&e.before.call(c,a,c);if(!a.stoped()){var d=e.subscribers;for(var h in d){var i=d[h].delegate;i.call(d[h].context||c,a,b);if(a.stoped())break}}return!a.stoped()&&a.assumed()&&e.after&&e.after.call(c,a,c),this},this.empty=function(){return e||(e.subscribers=new Array),f=0,this},this.reset=function(){return f=0,this},this.suspend=function(){return f++,this},this.resume=function(){return f--,this},a.mode(this,"subscribe",a.MODE_LOCKED),a.mode(this,"notify",a.MODE_LOCKED),a.mode(this,"empty",a.MODE_LOCKED),a.mode(this,"reset",a.MODE_LOCKED),a.mode(this,"suspend",a.MODE_LOCKED),a.mode(this,"resume",a.MODE_LOCKED)},a.mode(a.Enviroment,"Event",a.MODE_LOCKED),a.Enviroment.Loader=function(){this.addStrategy=function(a,b,c){},this.nativeInvokableLoaderStrategy=function(a){},this.load=function(a,b,c,d){},this.resolve=function(a){}},a.factory(a.Enviroment,"Loader",function(){var b={},c={},d={},e={},f={},g=[],h=[],i=function(f,h,i){var j=function(b,d,f){var g=new RegExp("@(requires|uses)[s]*([^;]*);","ig"),h=a.isArray(b),i=a.isObject(b);if(h||i){for(var j in b)h?(e[b[j]]=!0,d.push(b[j])):c[j]||(f.push({require:j,path:b[j]}),c[j]=!0);return b}var k=[],g=new RegExp("@(requires|uses)[s]*([^;]*);","ig");while(match=g.exec(b))k.push(match[2].trim()),d.push(match[2].trim());return k},k=0,l="",m=function(a){for(var c in b){var d=b[c],e=new RegExp(d.condition,"i");if(e.test(a)){var f=d.resolve(a,e.exec(a),d);if(f)return f}}return!1},n=function(b,e,f){var g=this;if(b.length>0){var h=b.pop(),i=h,p=i,q=m(i);q["class"]&&(p=q["class"]);if(d[p]||c[p]){console.log("existing:"+p+" => "+k+" file: "+l),n(b,e,f);return}d[p]=!0;if(!q["class"]){if(a.isArray(q))j(q,b,e);else{var r={};r[p]=q.path,j(r,b,e)}n(b,e,f);return}o(q.path,function(a){c[p]=!0;var d=j(a,b);e.push({require:p,path:q.path,invokable:q}),n(b,e,f)},function(){});return}if(k<=0){f();return}},o=function(a,b,c){k++,l=a;var d=!1,e=function(a){d||(d=!0,k--,l="",b(a),c())};a=a,jQuery.ajax({url:a,method:"GET",dataType:"html",success:function(a){e(a)},error:function(a){d=!0,k--,l=""}})},p=function(a){while(a.length>0){var b=a.pop();g[b.require]||(g[b.require]=b.path,$("head").append('<script type="text/javascript" id="'+b.require+'" src="'+b.path+'"></script>'))}};this.addStrategy=function(a,c,d,e){b[a]={enabled:!0,condition:c,resolve:d,root:e}},this.nativeInvokableLoaderStrategy=function(a){var b={"class":a,invokable:a},c=b["class"].split("."),d="",e="";for(var f=0;f<c.length-1;f++)e+="/"+c[f],f==0&&(b.namespace=c[f]);return d=c[c.length-1],b.load={directory:e,file:d+".js"},b.load.path=b.load.directory+"/"+b.load.file,b.path=b.load.path,b},this.resolve=function(a){return m(a)},this.load=function(b,c,d){k=0;var e=[];a.isArray(b)?e=a.clone(b):e.push(b);var f=[];a.fork(n,e,f,function(a,b,c){return function(){var a=b[0];p(b),c(a)}}(b,f,c))},this.parse=function(b,c,d){var e=[b],f=this;o(b,function(b){j(b,e),a.fork(f.load,e,c,d)},function(){})}};return i.prototype=new a.Enviroment.Loader,i.prototype.constructor=a.Enviroment.Loader,i}),a.mode(a.Enviroment,"Loader",a.MODE_LOCKED),a.Enviroment};typeof define=="function"&&define.amd?define(["C"],a):typeof module!="undefined"&&module.exports?module.exports=a(require()):window["C.Enviroment"]=a(C)})();